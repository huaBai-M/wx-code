module.exports = function (e) { var t = {}; function n(o) { if (t[o]) return t[o].exports; var r = t[o] = { i: o, l: !1, exports: {} }; return e[o].call(r.exports, r, r.exports, n), r.l = !0, r.exports } return n.m = e, n.c = t, n.d = function (e, t, o) { n.o(e, t) || Object.defineProperty(e, t, { configurable: !1, enumerable: !0, get: o }) }, n.r = function (e) { Object.defineProperty(e, "__esModule", { value: !0 }) }, n.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return n.d(t, "a", t), t }, n.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, n.p = "", n(n.s = 288) }([, , function (e, t, n) { "use strict"; t.__esModule = !0; var o = a(n(119)), r = a(n(105)), i = "function" == typeof r.default && "symbol" == typeof o.default ? function (e) { return typeof e } : function (e) { return e && "function" == typeof r.default && e.constructor === r.default && e !== r.default.prototype ? "symbol" : typeof e }; function a(e) { return e && e.__esModule ? e : { default: e } } t.default = "function" == typeof r.default && "symbol" === i(o.default) ? function (e) { return void 0 === e ? "undefined" : i(e) } : function (e) { return e && "function" == typeof r.default && e.constructor === r.default && e !== r.default.prototype ? "symbol" : void 0 === e ? "undefined" : i(e) } }, , , function (e, t, n) { var o = n(38)("wks"), r = n(26), i = n(6).Symbol, a = "function" == typeof i; (e.exports = function (e) { return o[e] || (o[e] = a && i[e] || (a ? i : r)("Symbol." + e)) }).store = o }, function (e, t) { var n = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")(); "number" == typeof __g && (__g = n) }, , function (e, t, n) { var o = n(20), r = n(64), i = n(40), a = Object.defineProperty; t.f = n(10) ? Object.defineProperty : function (e, t, n) { if (o(e), t = i(t, !0), o(n), r) try { return a(e, t, n) } catch (e) { } if ("get" in n || "set" in n) throw TypeError("Accessors not supported!"); return "value" in n && (e[t] = n.value), e } }, function (e, t) { var n = {}.hasOwnProperty; e.exports = function (e, t) { return n.call(e, t) } }, function (e, t, n) { e.exports = !n(19)(function () { return 7 != Object.defineProperty({}, "a", { get: function () { return 7 } }).a }) }, function (e, t) { var n = e.exports = { version: "2.5.5" }; "number" == typeof __e && (__e = n) }, function (e, t, n) { var o = n(67), r = n(42); e.exports = function (e) { return o(r(e)) } }, function (e, t, n) { var o = n(8), r = n(24); e.exports = n(10) ? function (e, t, n) { return o.f(e, t, r(1, n)) } : function (e, t, n) { return e[t] = n, e } }, , , function (e, t) { e.exports = function (e) { return "object" == typeof e ? null !== e : "function" == typeof e } }, , , function (e, t) { e.exports = function (e) { try { return !!e() } catch (e) { return !0 } } }, function (e, t, n) { var o = n(16); e.exports = function (e) { if (!o(e)) throw TypeError(e + " is not an object!"); return e } }, function (e, t, n) { var o = n(6), r = n(11), i = n(68), a = n(13), s = n(9), c = function (e, t, n) { var u, l, f, d = e & c.F, p = e & c.G, h = e & c.S, _ = e & c.P, y = e & c.B, m = e & c.W, v = p ? r : r[t] || (r[t] = {}), g = v.prototype, b = p ? o : h ? o[t] : (o[t] || {}).prototype; for (u in p && (n = t), n) (l = !d && b && void 0 !== b[u]) && s(v, u) || (f = l ? b[u] : n[u], v[u] = p && "function" != typeof b[u] ? n[u] : y && l ? i(f, o) : m && b[u] == f ? function (e) { var t = function (t, n, o) { if (this instanceof e) { switch (arguments.length) { case 0: return new e; case 1: return new e(t); case 2: return new e(t, n) }return new e(t, n, o) } return e.apply(this, arguments) }; return t.prototype = e.prototype, t }(f) : _ && "function" == typeof f ? i(Function.call, f) : f, _ && ((v.virtual || (v.virtual = {}))[u] = f, e & c.R && g && !g[u] && a(g, u, f))) }; c.F = 1, c.G = 2, c.S = 4, c.P = 8, c.B = 16, c.W = 32, c.U = 64, c.R = 128, e.exports = c }, function (e, t, n) { "use strict"; t.__esModule = !0; var o, r = n(66), i = (o = r) && o.__esModule ? o : { default: o }; t.default = function () { function e(e, t) { for (var n = 0; n < t.length; n++) { var o = t[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), (0, i.default)(e, o.key, o) } } return function (t, n, o) { return n && e(t.prototype, n), o && e(t, o), t } }() }, function (e, t, n) { "use strict"; t.__esModule = !0, t.default = function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } }, function (e, t) { e.exports = function (e, t) { return { enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t } } }, , function (e, t) { var n = 0, o = Math.random(); e.exports = function (e) { return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++n + o).toString(36)) } }, function (e, t) { e.exports = {} }, , function (e, t) { t.f = {}.propertyIsEnumerable }, function (e, t, n) { var o = n(61), r = n(37); e.exports = Object.keys || function (e) { return o(e, r) } }, , , , function (e, t, n) { var o = n(6), r = n(11), i = n(41), a = n(35), s = n(8).f; e.exports = function (e) { var t = r.Symbol || (r.Symbol = i ? {} : o.Symbol || {}); "_" == e.charAt(0) || e in t || s(t, e, { value: a.f(e) }) } }, function (e, t, n) { t.f = n(5) }, function (e, t, n) { var o = n(8).f, r = n(9), i = n(5)("toStringTag"); e.exports = function (e, t, n) { e && !r(e = n ? e : e.prototype, i) && o(e, i, { configurable: !0, value: t }) } }, function (e, t) { e.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",") }, function (e, t, n) { var o = n(6), r = o["__core-js_shared__"] || (o["__core-js_shared__"] = {}); e.exports = function (e) { return r[e] || (r[e] = {}) } }, function (e, t, n) { var o = n(38)("keys"), r = n(26); e.exports = function (e) { return o[e] || (o[e] = r(e)) } }, function (e, t, n) { var o = n(16); e.exports = function (e, t) { if (!o(e)) return e; var n, r; if (t && "function" == typeof (n = e.toString) && !o(r = n.call(e))) return r; if ("function" == typeof (n = e.valueOf) && !o(r = n.call(e))) return r; if (!t && "function" == typeof (n = e.toString) && !o(r = n.call(e))) return r; throw TypeError("Can't convert object to primitive value") } }, function (e, t) { e.exports = !0 }, function (e, t) { e.exports = function (e) { if (null == e) throw TypeError("Can't call method on  " + e); return e } }, function (e, t) { var n = Math.ceil, o = Math.floor; e.exports = function (e) { return isNaN(e = +e) ? 0 : (e > 0 ? o : n)(e) } }, , , function (e, t) { t.f = Object.getOwnPropertySymbols }, , , function (e, t) { var n = {}.toString; e.exports = function (e) { return n.call(e).slice(8, -1) } }, function (e, t, n) { var o = n(42); e.exports = function (e) { return Object(o(e)) } }, function (e, t, n) { var o = n(20), r = n(114), i = n(37), a = n(39)("IE_PROTO"), s = function () { }, c = function () { var e, t = n(63)("iframe"), o = i.length; for (t.style.display = "none", n(111).appendChild(t), t.src = "javascript:", (e = t.contentWindow.document).open(), e.write("<script>document.F=Object<\/script>"), e.close(), c = e.F; o--;)delete c.prototype[i[o]]; return c() }; e.exports = Object.create || function (e, t) { var n; return null !== e ? (s.prototype = o(e), n = new s, s.prototype = null, n[a] = e) : n = c(), void 0 === t ? n : r(n, t) } }, , , , , , , , , function (e, t, n) { var o = n(61), r = n(37).concat("length", "prototype"); t.f = Object.getOwnPropertyNames || function (e) { return o(e, r) } }, function (e, t, n) { var o = n(9), r = n(12), i = n(113)(!1), a = n(39)("IE_PROTO"); e.exports = function (e, t) { var n, s = r(e), c = 0, u = []; for (n in s) n != a && o(s, n) && u.push(n); for (; t.length > c;)o(s, n = t[c++]) && (~i(u, n) || u.push(n)); return u } }, function (e, t, n) { e.exports = n(13) }, function (e, t, n) { var o = n(16), r = n(6).document, i = o(r) && o(r.createElement); e.exports = function (e) { return i ? r.createElement(e) : {} } }, function (e, t, n) { e.exports = !n(10) && !n(19)(function () { return 7 != Object.defineProperty(n(63)("div"), "a", { get: function () { return 7 } }).a }) }, function (e, t, n) { "use strict"; var o = n(41), r = n(21), i = n(62), a = n(13), s = n(27), c = n(115), u = n(36), l = n(110), f = n(5)("iterator"), d = !([].keys && "next" in [].keys()), p = function () { return this }; e.exports = function (e, t, n, h, _, y, m) { c(n, t, h); var v, g, b, C = function (e) { if (!d && e in M) return M[e]; switch (e) { case "keys": case "values": return function () { return new n(this, e) } }return function () { return new n(this, e) } }, k = t + " Iterator", O = "values" == _, S = !1, M = e.prototype, w = M[f] || M["@@iterator"] || _ && M[_], N = w || C(_), T = _ ? O ? C("entries") : N : void 0, A = "Array" == t && M.entries || w; if (A && (b = l(A.call(new e))) !== Object.prototype && b.next && (u(b, k, !0), o || "function" == typeof b[f] || a(b, f, p)), O && w && "values" !== w.name && (S = !0, N = function () { return w.call(this) }), o && !m || !d && !S && M[f] || a(M, f, N), s[t] = N, s[k] = p, _) if (v = { values: O ? N : C("values"), keys: y ? N : C("keys"), entries: T }, m) for (g in v) g in M || i(M, g, v[g]); else r(r.P + r.F * (d || S), t, v); return v } }, function (e, t, n) { e.exports = { default: n(95), __esModule: !0 } }, function (e, t, n) { var o = n(49); e.exports = Object("z").propertyIsEnumerable(0) ? Object : function (e) { return "String" == o(e) ? e.split("") : Object(e) } }, function (e, t, n) { var o = n(116); e.exports = function (e, t, n) { if (o(e), void 0 === t) return e; switch (n) { case 1: return function (n) { return e.call(t, n) }; case 2: return function (n, o) { return e.call(t, n, o) }; case 3: return function (n, o, r) { return e.call(t, n, o, r) } }return function () { return e.apply(t, arguments) } } }, , , , , function (e, t, n) { var o = n(43), r = Math.min; e.exports = function (e) { return e > 0 ? r(o(e), 9007199254740991) : 0 } }, function (e, t, n) { "use strict"; var o = n(117)(!0); n(65)(String, "String", function (e) { this._t = String(e), this._i = 0 }, function () { var e, t = this._t, n = this._i; return n >= t.length ? { value: void 0, done: !0 } : (e = o(t, n), this._i += e.length, { value: e, done: !1 }) }) }, , , , , , , , , , , , , , , function (e, t, n) { var o = n(29), r = n(24), i = n(12), a = n(40), s = n(9), c = n(64), u = Object.getOwnPropertyDescriptor; t.f = n(10) ? u : function (e, t) { if (e = i(e), t = a(t, !0), c) try { return u(e, t) } catch (e) { } if (s(e, t)) return r(!o.f.call(e, t), e[t]) } }, , , , , function (e, t, n) { var o = n(21); o(o.S + o.F * !n(10), "Object", { defineProperty: n(8).f }) }, function (e, t, n) { n(94); var o = n(11).Object; e.exports = function (e, t, n) { return o.defineProperty(e, t, n) } }, function (e, t, n) { n(34)("observable") }, function (e, t, n) { n(34)("asyncIterator") }, function (e, t) { }, function (e, t, n) { var o = n(12), r = n(60).f, i = {}.toString, a = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : []; e.exports.f = function (e) { return a && "[object Window]" == i.call(e) ? function (e) { try { return r(e) } catch (e) { return a.slice() } }(e) : r(o(e)) } }, function (e, t, n) { var o = n(49); e.exports = Array.isArray || function (e) { return "Array" == o(e) } }, function (e, t, n) { var o = n(30), r = n(46), i = n(29); e.exports = function (e) { var t = o(e), n = r.f; if (n) for (var a, s = n(e), c = i.f, u = 0; s.length > u;)c.call(e, a = s[u++]) && t.push(a); return t } }, function (e, t, n) { var o = n(26)("meta"), r = n(16), i = n(9), a = n(8).f, s = 0, c = Object.isExtensible || function () { return !0 }, u = !n(19)(function () { return c(Object.preventExtensions({})) }), l = function (e) { a(e, o, { value: { i: "O" + ++s, w: {} } }) }, f = e.exports = { KEY: o, NEED: !1, fastKey: function (e, t) { if (!r(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e; if (!i(e, o)) { if (!c(e)) return "F"; if (!t) return "E"; l(e) } return e[o].i }, getWeak: function (e, t) { if (!i(e, o)) { if (!c(e)) return !0; if (!t) return !1; l(e) } return e[o].w }, onFreeze: function (e) { return u && f.NEED && c(e) && !i(e, o) && l(e), e } } }, function (e, t, n) { "use strict"; var o = n(6), r = n(9), i = n(10), a = n(21), s = n(62), c = n(102).KEY, u = n(19), l = n(38), f = n(36), d = n(26), p = n(5), h = n(35), _ = n(34), y = n(101), m = n(100), v = n(20), g = n(16), b = n(12), C = n(40), k = n(24), O = n(51), S = n(99), M = n(89), w = n(8), N = n(30), T = M.f, A = w.f, I = S.f, j = o.Symbol, E = o.JSON, L = E && E.stringify, P = p("_hidden"), R = p("toPrimitive"), x = {}.propertyIsEnumerable, U = l("symbol-registry"), D = l("symbols"), F = l("op-symbols"), W = Object.prototype, H = "function" == typeof j, B = o.QObject, J = !B || !B.prototype || !B.prototype.findChild, V = i && u(function () { return 7 != O(A({}, "a", { get: function () { return A(this, "a", { value: 7 }).a } })).a }) ? function (e, t, n) { var o = T(W, t); o && delete W[t], A(e, t, n), o && e !== W && A(W, t, o) } : A, q = function (e) { var t = D[e] = O(j.prototype); return t._k = e, t }, K = H && "symbol" == typeof j.iterator ? function (e) { return "symbol" == typeof e } : function (e) { return e instanceof j }, Y = function (e, t, n) { return e === W && Y(F, t, n), v(e), t = C(t, !0), v(n), r(D, t) ? (n.enumerable ? (r(e, P) && e[P][t] && (e[P][t] = !1), n = O(n, { enumerable: k(0, !1) })) : (r(e, P) || A(e, P, k(1, {})), e[P][t] = !0), V(e, t, n)) : A(e, t, n) }, G = function (e, t) { v(e); for (var n, o = y(t = b(t)), r = 0, i = o.length; i > r;)Y(e, n = o[r++], t[n]); return e }, z = function (e) { var t = x.call(this, e = C(e, !0)); return !(this === W && r(D, e) && !r(F, e)) && (!(t || !r(this, e) || !r(D, e) || r(this, P) && this[P][e]) || t) }, X = function (e, t) { if (e = b(e), t = C(t, !0), e !== W || !r(D, t) || r(F, t)) { var n = T(e, t); return !n || !r(D, t) || r(e, P) && e[P][t] || (n.enumerable = !0), n } }, $ = function (e) { for (var t, n = I(b(e)), o = [], i = 0; n.length > i;)r(D, t = n[i++]) || t == P || t == c || o.push(t); return o }, Q = function (e) { for (var t, n = e === W, o = I(n ? F : b(e)), i = [], a = 0; o.length > a;)!r(D, t = o[a++]) || n && !r(W, t) || i.push(D[t]); return i }; H || (s((j = function () { if (this instanceof j) throw TypeError("Symbol is not a constructor!"); var e = d(arguments.length > 0 ? arguments[0] : void 0), t = function (n) { this === W && t.call(F, n), r(this, P) && r(this[P], e) && (this[P][e] = !1), V(this, e, k(1, n)) }; return i && J && V(W, e, { configurable: !0, set: t }), q(e) }).prototype, "toString", function () { return this._k }), M.f = X, w.f = Y, n(60).f = S.f = $, n(29).f = z, n(46).f = Q, i && !n(41) && s(W, "propertyIsEnumerable", z, !0), h.f = function (e) { return q(p(e)) }), a(a.G + a.W + a.F * !H, { Symbol: j }); for (var Z = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), ee = 0; Z.length > ee;)p(Z[ee++]); for (var te = N(p.store), ne = 0; te.length > ne;)_(te[ne++]); a(a.S + a.F * !H, "Symbol", { for: function (e) { return r(U, e += "") ? U[e] : U[e] = j(e) }, keyFor: function (e) { if (!K(e)) throw TypeError(e + " is not a symbol!"); for (var t in U) if (U[t] === e) return t }, useSetter: function () { J = !0 }, useSimple: function () { J = !1 } }), a(a.S + a.F * !H, "Object", { create: function (e, t) { return void 0 === t ? O(e) : G(O(e), t) }, defineProperty: Y, defineProperties: G, getOwnPropertyDescriptor: X, getOwnPropertyNames: $, getOwnPropertySymbols: Q }), E && a(a.S + a.F * (!H || u(function () { var e = j(); return "[null]" != L([e]) || "{}" != L({ a: e }) || "{}" != L(Object(e)) })), "JSON", { stringify: function (e) { for (var t, n, o = [e], r = 1; arguments.length > r;)o.push(arguments[r++]); if (n = t = o[1], (g(t) || void 0 !== e) && !K(e)) return m(t) || (t = function (e, t) { if ("function" == typeof n && (t = n.call(this, e, t)), !K(t)) return t }), o[1] = t, L.apply(E, o) } }), j.prototype[R] || n(13)(j.prototype, R, j.prototype.valueOf), f(j, "Symbol"), f(Math, "Math", !0), f(o.JSON, "JSON", !0) }, function (e, t, n) { n(103), n(98), n(97), n(96), e.exports = n(11).Symbol }, function (e, t, n) { e.exports = { default: n(104), __esModule: !0 } }, function (e, t) { e.exports = function (e, t) { return { value: t, done: !!e } } }, function (e, t) { e.exports = function () { } }, function (e, t, n) { "use strict"; var o = n(107), r = n(106), i = n(27), a = n(12); e.exports = n(65)(Array, "Array", function (e, t) { this._t = a(e), this._i = 0, this._k = t }, function () { var e = this._t, t = this._k, n = this._i++; return !e || n >= e.length ? (this._t = void 0, r(1)) : r(0, "keys" == t ? n : "values" == t ? e[n] : [n, e[n]]) }, "values"), i.Arguments = i.Array, o("keys"), o("values"), o("entries") }, function (e, t, n) { n(108); for (var o = n(6), r = n(13), i = n(27), a = n(5)("toStringTag"), s = "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","), c = 0; c < s.length; c++) { var u = s[c], l = o[u], f = l && l.prototype; f && !f[a] && r(f, a, u), i[u] = i.Array } }, function (e, t, n) { var o = n(9), r = n(50), i = n(39)("IE_PROTO"), a = Object.prototype; e.exports = Object.getPrototypeOf || function (e) { return e = r(e), o(e, i) ? e[i] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? a : null } }, function (e, t, n) { var o = n(6).document; e.exports = o && o.documentElement }, function (e, t, n) { var o = n(43), r = Math.max, i = Math.min; e.exports = function (e, t) { return (e = o(e)) < 0 ? r(e + t, 0) : i(e, t) } }, function (e, t, n) { var o = n(12), r = n(73), i = n(112); e.exports = function (e) { return function (t, n, a) { var s, c = o(t), u = r(c.length), l = i(a, u); if (e && n != n) { for (; u > l;)if ((s = c[l++]) != s) return !0 } else for (; u > l; l++)if ((e || l in c) && c[l] === n) return e || l || 0; return !e && -1 } } }, function (e, t, n) { var o = n(8), r = n(20), i = n(30); e.exports = n(10) ? Object.defineProperties : function (e, t) { r(e); for (var n, a = i(t), s = a.length, c = 0; s > c;)o.f(e, n = a[c++], t[n]); return e } }, function (e, t, n) { "use strict"; var o = n(51), r = n(24), i = n(36), a = {}; n(13)(a, n(5)("iterator"), function () { return this }), e.exports = function (e, t, n) { e.prototype = o(a, { next: r(1, n) }), i(e, t + " Iterator") } }, function (e, t) { e.exports = function (e) { if ("function" != typeof e) throw TypeError(e + " is not a function!"); return e } }, function (e, t, n) { var o = n(43), r = n(42); e.exports = function (e) { return function (t, n) { var i, a, s = String(r(t)), c = o(n), u = s.length; return c < 0 || c >= u ? e ? "" : void 0 : (i = s.charCodeAt(c)) < 55296 || i > 56319 || c + 1 === u || (a = s.charCodeAt(c + 1)) < 56320 || a > 57343 ? e ? s.charAt(c) : i : e ? s.slice(c, c + 2) : a - 56320 + (i - 55296 << 10) + 65536 } } }, function (e, t, n) { n(74), n(109), e.exports = n(35).f("iterator") }, function (e, t, n) { e.exports = { default: n(118), __esModule: !0 } }, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var o, r = n(2), i = (o = r) && o.__esModule ? o : { default: o }; var a, s = { merge: function () { var e = arguments; return e[0] = Object.assign.apply(Object.assign, arguments), e[0] }, verifyOptions: function () { var e = arguments; if (e[0] && e[0].constructor === Object) for (var t = 1; t < arguments.length; t++) { var n = e[t]; (n = n.split(" ")).map(function (t) { if (!e[0][t] && 0 != e[0][t]) throw Error("参数缺失 " + t) }) } }, deepClone: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; for (var n in e) "object" === (0, i.default)(e[n]) ? (t[n] = e[n].constructor === Array ? [] : {}, this.deepClone(e[n], t[n])) : t[n] = e[n]; return t }, guid: (a = function () { return (65536 * (1 + Math.random()) | 0).toString(16).substring(1) }, function () { return a() + a() + a() + a() + a() + a() + a() + a() }), isString: function (e) { return e.constructor === String }, isNumber: function (e) { return e.constructor === Number }, isBoolean: function (e) { return e.constructor === Boolean }, isObject: function (e) { return e.constructor === Object }, isArray: function (e) { return e.constructor === Array }, isFunction: function (e) { return e.constructor === Function }, isDate: function (e) { return e.constructor === Date }, isRegExp: function (e) { return e.constructor === RegExp }, isNull: function (e) { return null === e }, isUndefined: function (e) { return void 0 === e }, exist: function (e) { return !isNull(e) && !isUndefined(e) } }; t.default = s, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var o = i(n(23)), r = i(n(22)); function i(e) { return e && e.__esModule ? e : { default: e } } var a = function () { function e() { (0, o.default)(this, e), this.eventReset() } return (0, r.default)(e, [{ key: "eventReset", value: function () { var e = this; this._eventListeners && Object.keys(this._eventListeners).forEach(function (t) { delete e._eventListeners[t] }), this._eventListeners = {}, this._eventOnceListener && Object.keys(this._eventOnceListener).forEach(function (t) { delete e._eventOnceListener[t] }), this._eventOnceListener = {} } }, { key: "on", value: function (e, t) { if (!e) throw Error({ message: "event listener funkey undefined", callFunc: "adapter:_on" }); if (!(t instanceof Function)) throw Error({ message: "event listener next param should be function", callFunc: "adapter:_on" }); this._eventListeners[e] = t } }, { key: "off", value: function (e) { if (!e) throw Error({ message: "event listener funkey undefined", callFunc: "adapter:_off" }); if (!this._eventListeners[e]) throw Error({ message: "event listener unbind failed!", callFunc: "adapter:_off" }); delete this._eventListeners[e] } }, { key: "once", value: function (e, t) { if (!e) throw Error({ message: "event once listener funkey undefined", callFunc: "adapter:_once" }); if (!(t instanceof Function)) throw Error({ message: "event once listener next param should be function", callFunc: "adapter:_once" }); this._eventOnceListener[e] = t } }, { key: "emit", value: function (e, t) { this._eventOnceListener && this._eventOnceListener[e] instanceof Function && (this._eventOnceListener[e](t), delete this._eventOnceListener[e]), this._eventListeners && this._eventListeners[e] instanceof Function && this._eventListeners[e](t) } }]), e }(); t.default = a, e.exports = t.default }, function (e, t, n) { "use strict"; t.__esModule = !0; var o = a(n(286)), r = a(n(282)), i = a(n(2)); function a(e) { return e && e.__esModule ? e : { default: e } } t.default = function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === t ? "undefined" : (0, i.default)(t))); e.prototype = (0, r.default)(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (o.default ? (0, o.default)(e, t) : e.__proto__ = t) } }, function (e, t, n) { "use strict"; t.__esModule = !0; var o, r = n(2), i = (o = r) && o.__esModule ? o : { default: o }; t.default = function (e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" !== (void 0 === t ? "undefined" : (0, i.default)(t)) && "function" != typeof t ? e : t } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.pureLogger = void 0; var o = i(n(23)), r = i(n(22)); function i(e) { return e && e.__esModule ? e : { default: e } } var a = function () { function e(t) { var n = t.debug; (0, o.default)(this, e), this.debug = n } return (0, r.default)(e, [{ key: "log", value: function (e) { if (this.debug) { for (var t = arguments.length, n = Array(t > 1 ? t - 1 : 0), o = 1; o < t; o++)n[o - 1] = arguments[o]; return console.log("%c WeAppRTC:: " + e, "color:#bada55", n) } } }, { key: "warn", value: function (e) { if (this.debug) { for (var t = arguments.length, n = Array(t > 1 ? t - 1 : 0), o = 1; o < t; o++)n[o - 1] = arguments[o]; return console.warn("%c WeAppRTC:: " + e, n) } } }, { key: "error", value: function (e) { if (this.debug) { for (var t = arguments.length, n = Array(t > 1 ? t - 1 : 0), o = 1; o < t; o++)n[o - 1] = arguments[o]; return console.error("%c WeAppRTC:: " + e, n) } } }]), e }(); t.default = a; t.pureLogger = { trace: function () { }, debug: function () { }, log: function () { }, warn: function () { }, error: function () { } } }, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(267); Object.defineProperty(t, "CONSTANT_ERROR", { enumerable: !0, get: function () { return i(o).default } }); var r = n(266); function i(e) { return e && e.__esModule ? e : { default: e } } Object.defineProperty(t, "CONSTANT_SOCKET", { enumerable: !0, get: function () { return i(r).default } }); t.CALL_TYPE = { NETCALL_TYPE_AUDIO: 1, NETCALL_TYPE_VIDEO: 2 }, t.CONTROL_TYPE = { NETCALL_CONTROL_COMMAND_NOTIFY_AUDIO_ON: 1, NETCALL_CONTROL_COMMAND_NOTIFY_AUDIO_OFF: 2, NETCALL_CONTROL_COMMAND_NOTIFY_VIDEO_ON: 3, NETCALL_CONTROL_COMMAND_NOTIFY_VIDEO_OFF: 4, NETCALL_CONTROL_COMMAND_SWITCH_AUDIO_TO_VIDEO: 5, NETCALL_CONTROL_COMMAND_SWITCH_AUDIO_TO_VIDEO_AGREE: 6, NETCALL_CONTROL_COMMAND_SWITCH_AUDIO_TO_VIDEO_REJECT: 7, NETCALL_CONTROL_COMMAND_SWITCH_VIDEO_TO_AUDIO: 8, NETCALL_CONTROL_COMMAND_BUSY: 9, NETCALL_CONTROL_COMMAND_SELF_CAMERA_INVALID: 10, NETCALL_CONTROL_COMMAND_SELF_AUDIO_INVALID: 11, NETCALL_CONTROL_COMMAND_SELF_ON_BACKGROUND: 12, NETCALL_CONTROL_COMMAND_START_NOTIFY_RECEIVED: 13 }, t.SESSION_MODE = { P2P: "p2p", MEETING: "meeting" }, t.ROLE_FOR_MEETING = { ROLE_PLAYER: 0, ROLE_AUDIENCE: 1 }, t.HANGUP_TYPE = { HANGUP_TYPE_NORMAL: 0, HANGUP_TYPE_TIMEOUT: -1 } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var o = l(n(23)), r = l(n(22)), i = l(n(172)), a = l(n(171)), s = l(n(272)), c = l(n(170)), u = n(173); function l(e) { return e && e.__esModule ? e : { default: e } } var f = function (e) { function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; (0, o.default)(this, t); var n = (0, i.default)(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return n._init(e), n._websocket = null, n._status = {}, n } return (0, a.default)(t, e), (0, r.default)(t, [{ key: "_init", value: function (e) { var t = e.adapterRef, n = e.logger, o = void 0 === n ? u.pureLogger : n; this._adapterRef = t, this._logger = o } }, { key: "_destroy", value: function () { var e = this; return this.stopSignal().then(function () { return e._status = {}, Promise.resolve() }) } }, { key: "resetWhenClose", value: function () { this._status = {}, this._websocket = null } }, { key: "_bindEvent", value: function () { this._websocket ? (this._websocket.on("open", this._onOpen.bind(this)), this._websocket.on("error", this._onError.bind(this)), this._websocket.on("close", this._onClose.bind(this)), this._websocket.on("syncDone", this._onSyncDone.bind(this)), this._websocket.on("clientLeave", this._onClientLeave.bind(this)), this._websocket.on("clientJoin", this._onClientJoin.bind(this)), this._websocket.on("clientUpdate", this._onClientUpdate.bind(this)), this._websocket.on("liveRoomClose", this._onLiveRoomClose.bind(this)), this._websocket.on("kicked", this._onKicked.bind(this)), this._websocket.on("sendCommandOverTime", this._onSendCommandOverTime.bind(this))) : this._logger.error("WSController: _bindEvent: _websocket为空！") } }, { key: "_unbindEvent", value: function () { this._websocket ? (this._websocket.off("open"), this._websocket.off("error"), this._websocket.off("syncDone"), this._websocket.off("clientLeave"), this._websocket.off("clientJoin"), this._websocket.off("clientUpdate"), this._websocket.off("liveRoomClose"), this._websocket.off("kicked"), this._websocket.off("sendCommandOverTime")) : this._logger.error("WSController: _bindEvent: _websocket为空！") } }, { key: "_onOpen", value: function (e) { this._adapterRef.emit("open", e) } }, { key: "_onError", value: function (e) { this._adapterRef.emit("error", e) } }, { key: "_onClose", value: function () { this._adapterRef.emit("close") } }, { key: "_onSyncDone", value: function (e) { var t = Object.assign({}, e); t.userlist.map(function (e) { e.account = e.accid, delete e.accid }), this._adapterRef.emit("syncDone", t) } }, { key: "_onClientLeave", value: function (e) { var t = Object.assign({}, e); delete t.accid, t.account = e.accid, this._adapterRef.emit("clientLeave", t) } }, { key: "_onClientJoin", value: function (e) { var t = Object.assign({}, e); delete t.accid, t.account = e.accid, this._adapterRef.emit("clientJoin", t) } }, { key: "_onClientUpdate", value: function (e) { var t = Object.assign({}, e.body); delete t.accid, t.account = e.accid, this._adapterRef.emit("clientUpdate", t) } }, { key: "_onLiveRoomClose", value: function (e) { this._adapterRef.emit("liveRoomClose", e) } }, { key: "_onKicked", value: function (e) { this._adapterRef.emit("kicked", e) } }, { key: "_onSendCommandOverTime", value: function () { this._adapterRef.emit("sendCommandOverTime") } }, { key: "joinChannel", value: function (e) { return this.setStartSessionTime(), Object.assign(this._status, e), e.logger = this._logger, e.adapterRef = this._adapterRef, this._websocket ? Promise.reject("wsController: already in session ...") : (this._websocket = new s.default(e), this._bindEvent(), this._websocket.startLogin()) } }, { key: "leaveChannel", value: function () { return this.setEndSessionTime(), this.stopSignal() } }, { key: "stopSignal", value: function () { var e = this; return new Promise(function (t, n) { e._websocket ? e._websocket._destroy().then(function () { e._websocket = null, e._logger.log("wsController: session stoped"), t() }).catch(function () { n() }) : t() }) } }, { key: "switchMode", value: function (e) { return this._websocket.updatePushMode(e) } }, { key: "setStartSessionTime", value: function () { this._adapterRef.commonStatus.startSessionTime = +Date.now() } }, { key: "setEndSessionTime", value: function () { if (this._adapterRef.commonStatus.startSessionTime) { this._adapterRef.commonStatus.endSessionTime = +Date.now(); var e = this._adapterRef.commonStatus.endSessionTime - this._adapterRef.commonStatus.startSessionTime; this._adapterRef.emit("sessionDuration", e), this._adapterRef.commonStatus.startSessionTime = 0, this._adapterRef.commonStatus.endSessionTime = 0 } else this._logger.warn("WSContrller: setEndSessionTime failed: startSessionTime undefined！") } }]), t }(c.default); t.default = f, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var o = u(n(23)), r = u(n(22)), i = u(n(172)), a = u(n(171)), s = u(n(170)), c = n(173); u(n(169)); function u(e) { return e && e.__esModule ? e : { default: e } } var l = function (e) { function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; (0, o.default)(this, t); var n = (0, i.default)(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return n._nim = null, n._init(e), n._status = { timeoutTimer: null, uid4AccountMap: {}, account4UidMap: {}, imInfo: {}, beCalledInfo: {} }, n } return (0, a.default)(t, e), (0, r.default)(t, [{ key: "_init", value: function (e) { var t = e.nim, n = e.logger, o = void 0 === n ? c.pureLogger : n, r = e.adapterRef; this._resetStatus(), this._nim = t, this._logger = o, this._adapterRef = r, this._bindIMEvent() } }, { key: "_resetStatus", value: function () { this._status && (clearTimeout(this._status.timeoutTimer), this._status.timeoutTimer = null, this._status.uid4AccountMap = {}, this._status.account4UidMap = {}, this._status.imInfo = {}), this._nim && 0 !== Object.keys(this._nim) && this._nim.protocol.setCurrentNetcall() } }, { key: "_bindIMEvent", value: function () { this._nim && 0 !== Object.keys(this._nim) ? (this._nim.on("beCalled", this._onBeCalled.bind(this)), this._nim.on("notifyCalleeAck", this._onNotifyCalleeAck.bind(this)), this._nim.on("notifyHangup", this._onNotifyHangup.bind(this)), this._nim.on("netcallControl", this._onNetcallControl.bind(this)), this._nim.on("notifyCalleeAckSync", this._onNotifyCalleeAckSync.bind(this)), this._nim.on("notifyJoin", this._onNotifyJoin.bind(this))) : this._logger.warn("IMController: _bindIMEvent: nim 实例不存在，绑定事件失败！") } }, { key: "_unBindIMEvent", value: function () { this._nim ? (this._nim.removeListener("beCalled", this._onBeCalled.bind(this)), this._nim.removeListener("notifyCalleeAck", this._onNotifyCalleeAck.bind(this)), this._nim.removeListener("notifyHangup", this._onNotifyHangup.bind(this)), this._nim.removeListener("netcallControl", this._onNetcallControl.bind(this)), this._nim.removeListener("notifyCalleeAckSync", this._onNotifyCalleeAckSync.bind(this)), this._nim.removeListener("notifyJoin", this._onNotifyJoin.bind(this))) : this._logger.warn("IMController: _unBindIMEvent: nim 实例不存在，解绑事件失败！") } }, { key: "_addAccountUidMap", value: function (e, t) { this._status.uid4AccountMap || (this._status.uid4AccountMap = {}), this._status.uid4AccountMap[t] = e, this._status.account4UidMap || (this._status.account4UidMap = {}), this._status.account4UidMap[e] = t } }, { key: "_parseAccountUidMap", value: function (e) { for (var t in e) this._addAccountUidMap(t, e[t]) } }, { key: "getUidByAccount", value: function (e) { return this._status.account4UidMap[e] } }, { key: "getAccountByUid", value: function (e) { var t = this._status.uid4AccountMap[e]; return this._logger.log("IMController: getAccountByUid " + e + " => " + t), t } }, { key: "initNetcall", value: function (e) { var t = this; return this._logger.log("IMController: initNetcall options=" + e), this._nim.initNetcall(e).then(function (e) { return t._logger.log("IMController: initNetcall response=%o", e), t._adapterRef._updateStatus({ signalInited: !0 }), Object.assign(t._status.imInfo, e, { sessionMode: "p2p", account: t._nim.account }), Promise.resolve(e.accountUidMap) }).catch(function (e) { return t._logger.error("IMBusiness:initNetcall error=%o", e), t._adapterRef._updateStatus({ signalEndTime: Date.now() }), Promise.reject(e) }) } }, { key: "response", value: function (e) { var t = this; this._logger.log("IMController: response options=%o", e); var n = e.caller, o = e.accepted, r = e.type, i = e.cid, a = e.fn || "calleeAck"; return this._nim[a]({ account: n, channelId: i, type: r, accepted: o }).then(function (e) { t._logger.log("IMController: response success", e); var n = {}; o && Object.assign(n, { signalStartTime: Date.now(), onTheCall: !0 }), Object.assign(n, { calling: !!o, isCaller: !1 }), t._adapterRef._updateStatus(n) }, function (e) { throw t._logger.error("IMController: response error=%o", e), e }) } }, { key: "hangup", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = null; if (this._adapterRef._updateStatus({ onTheCall: !1 }), t = this._adapterRef._status.isCaller ? this._status.imInfo.channelId : this._status.beCalledInfo.channelId, this._logger.log("IMController: hangup: ", t), t && this._adapterRef._status.calling) { var n = e.fn || "hangup"; this._nim[n]({ channelId: t }) } return this._resetWhenHangup(), Promise.resolve() } }, { key: "control", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; if (this._logger.log("IMController: control options=%o", t), t.channelId || (this._adapterRef._status.isCaller ? t.channelId = this._status.imInfo.channelId : t.channelId = this._status.beCalledInfo.channelId), t.command && t.channelId) { var n = t.fn || "netcallControl"; return t.type = t.command, this._nim[n](t).catch(function (t) { e._logger.error("IMController: control error=%o", t) }) } return Promise.reject("IMController: control: command或channelId为空！") } }, { key: "createChannel", value: function (e) { var t = this, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return this._adapterRef._updateStatus({ signalStartTime: Date.now() }), this._nim[e](n).then(function (e) { return t._logger.log("IMController: createChannel success=%o", e), Promise.resolve(e) }).catch(function (e) { return t._logger.error("IMController: createChannel error=%o", e), t._adapterRef._updateStatus({ signalEndTime: Date.now() }), Promise.reject(e) }) } }, { key: "joinChannel", value: function (e) { var t = this, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return this._nim[e](n).then(function (e) { return t._parseAccountUidMap(e.accountUidMap), Object.assign(e, { sessionMode: "meeting", account: t._nim.account, uid: t.getUidByAccount(t._nim.account), serverMap: JSON.parse(e.serverMap) }), t._adapterRef._updateStatus({ signalEndTime: Date.now(), signalInited: !0, sessionMode: "meeting" }), Object.assign(t._status.imInfo, e), Promise.resolve(e) }).catch(function (e) { return t._adapterRef._updateStatus({ signalEndTime: Date.now() }), Promise.reject(e) }) } }, { key: "_onNotifyJoin", value: function (e) { this._logger.log("IMController: _onNotifyJoin: " + e); var t = e.accountUidMap; for (var n in this._parseAccountUidMap(t), t) this._adapterRef.emit("joinChannel", { uid: t[n], account: n, cid: e.channelId }) } }, { key: "_onBeCalled", value: function (e) { this._logger.log("IMController: _onBeCalled", e), this._adapterRef._updateStatus({ signalInited: !0, isCaller: !1, sessionMode: "p2p", calling: !0 }), !1 === this._adapterRef._status.onTheCall && Object.assign(this._status.beCalledInfo, e), this._status.imInfo || (this._status.imInfo = {}), this._status.imInfo.uid = e.uid, this._adapterRef.emit("beCalling", { caller: e.account, cid: e.channelId, type: e.type }) } }, { key: "_onNetcallControl", value: function (e) { var t = ""; t = this._adapterRef._status.isCaller ? this._status.imInfo.channelId : this._status.beCalledInfo.channelId, e.channelId === t ? (this._logger.log("IMController: _onNetcallControl: ", e), this._adapterRef.emit("control", { cid: e.channelId, command: e.type, account: e.account })) : this._logger.warn("IMController: _onNetcallControl: not current channel! drop!", e) } }, { key: "_onNotifyCalleeAck", value: function (e) { this._logger.log("IMController: _onNotifyCalleeAck: ", e); var t = e.accepted, n = e.account, o = e.channelId, r = e.type; t ? this._adapterRef._updateStatus({ onTheCall: !0 }) : !1 === this._adapterRef._status.isTeamCall && this._resetWhenHangup(), this._adapterRef.emit(t ? "callAccepted" : "callRejected", { cid: o, account: n, type: r }) } }, { key: "_onNotifyHangup", value: function (e) { this._logger.log("IMController: _onNotifyHangup: ", e); var t = this._adapterRef._status.onTheCall, n = null; this._adapterRef._updateStatus({ onTheCall: !1, calling: !1 }), n = this._adapterRef._status.isCaller ? this._status.imInfo.channelId : this._status.beCalledInfo.channelId; var o = e.channelId === n; t && o && (this._adapterRef.leaveChannel(), this._adapterRef._wsController.setEndSessionTime(), this._resetWhenHangup()), this._adapterRef.emit("hangup", { cid: e.channelId, timetag: e.timetag, account: e.account }) } }, { key: "_onNotifyCalleeAckSync", value: function (e) { this._logger.log("IMController: _onNetcallControl: ", e); var t = e.timetag, n = e.channelId, o = e.type, r = e.accepted, i = e.fromClientType; this._adapterRef.emit("callerAckSync", { timetag: t, cid: n, type: o, accepted: r, fromClientType: i }), this._resetWhenHangup() } }, { key: "_resetWhenHangup", value: function () { this._adapterRef._resetWhenHangup() } }, { key: "destroy", value: function () { return this._resetStatus(), this.eventReset(), this._nim = null, Promise.resolve() } }, { key: "reset", value: function () { return this._resetStatus(), Promise.resolve() } }]), t }(s.default); t.default = l, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var o = s(n(263)), r = s(n(262)), i = n(261), a = s(n(169)); function s(e) { return e && e.__esModule ? e : { default: e } } var c = { setNetcallSession: function (e) { }, call: function (e) { var t = this; if (this._status.calling) return Promise.reject("呼叫失败: 当前正在通话中"); a.default.verifyOptions(e, "type callee"); var n = e.callee, o = e.type, r = e.forceKeepCalling, i = n.constructor === Array; return this._updateStatus({ signalStartTime: Date.now(), calling: !0, isCaller: !0, callee: n, isTeamCall: i }), this._imController.initNetcall({ type: o, pushConfig: { forceKeepCalling: r ? 1 : 0 }, accounts: i ? n : [n], webrtcEnable: !0 }).catch(function (e) { return t.logger.error("call error: " + e), t._resetWhenHangup() }) }, control: function (e) { return a.default.verifyOptions(e, "command"), e.cid && (e.channelId = e.cid), Object.assign(e, { fn: "netcallControl" }), this._imController.control(e) }, response: function (e) { return a.default.verifyOptions(e, "caller accepted type cid"), this._imController.response(e) }, hangup: function () { return this._imController.hangup({ fn: "hangup", recordType: "cancelNetcallBeforeAccept" }) }, createChannel: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return a.default.verifyOptions(t, "channelName"), t.custom = t.custom || "", t.webrtcEnable = !0, Object.assign(this._status, { signalStartTime: Date.now() }), this._imController.createChannel("createChannel", t).then(function (e) { return Promise.resolve(e) }).catch(function (t) { return e.logger.error("createChannel error=%o", t), Object.assign(e._status, { signalEndTime: Date.now() }), Promise.reject(t) }) }, joinChannel: function (e) { a.default.verifyOptions(e, "channelName mode role"); var t = a.default.deepClone(e), n = this, o = {}; return this.commonStatus.role = t.role, new Promise(function (e, r) { n._getChannelInfo(t).then(function (i) { return o = { accountUidMap: i.accountUidMap, uid: i.uid, cid: i.channelId, account: i.account }, n._wsController.joinChannel({ cid: +i.channelId, uid: i.uid, accid: i.account || "unknown", usertype: 2, token: i.channelId + "", address: "wss://" + i.serverMap.wechatapparray[0], mode: t.mode, role: t.role, scene: 1, liveEnable: t.liveEnable ? t.liveEnable : 0, rtmpRecord: t.rtmpRecord ? t.rtmpRecord : 0, recordAudio: t.recordAudio ? t.recordAudio : 0, recordVideo: t.recordVideo ? t.recordVideo : 0, recordType: t.recordType ? t.recordType : 0 }).then(function () { e(o) }).catch(function (e) { r(e) }) }).then(function () { return Promise.resolve(o) }).catch(function (e) { r(e) }) }) }, startRtc: function (e) { var t = this; a.default.verifyOptions(e, "mode"); var n = this._status.isCaller ? this._imController._status.imInfo : this._imController._status.beCalledInfo, o = this._imController._nim.account, r = n.accountUidMap[o]; return new Promise(function (i, a) { t._updateStatus({ signalInited: !0 }), t._wsController.joinChannel({ cid: +n.channelId, uid: r, accid: o || "unknown", usertype: 2, token: n.channelId + "", address: "wss://" + JSON.parse(n.serverMap).wechatapparray[0], mode: e.mode, scene: 0, recordAudio: e.recordAudio ? e.recordAudio : 0, recordVideo: e.recordVideo ? e.recordVideo : 0, rtmpRecord: e.rtmpRecord ? e.rtmpRecord : 0, recordType: e.recordType ? e.recordType : 0 }).then(function () { i({ uid: n.uid, cid: n.channelId, account: o }) }).catch(function (e) { a(e) }) }) }, leaveChannel: function () { var e = this, t = this; return !1 === this._status.signalInited ? (this.logger.error("未处于房间中"), Promise.reject("未处于房间中")) : new Promise(function (n, o) { e._wsController.leaveChannel().then(function () { t._resetStatus(), t._imController._resetStatus(), n() }).catch(function (e) { o(e) }) }) }, switchMode: function (e) { if (!a.default.isNumber(e)) throw Error("switchMode: 入参类型必须为Number"); switch (e = parseInt(e)) { case 0: case 1: case 2: case 3: break; default: return Promise.reject("RTC: switchMode: mode值无效！") }return this._wsController.switchMode(e) }, destroy: function () { this._resetStatus(), this._wsController && this._wsController._destroy(), this._imController && this._imController._resetStatus(), this._imController._nim && this._imController._nim.protocol && this._imController._nim.protocol.setCurrentNetcall() }, _initRTC: function (e) { this._imController = new o.default(Object.assign(e, { adapterRef: this })), this._wsController = new r.default(Object.assign(e, { adapterRef: this })), Object.assign(this, i.CONTROL_TYPE, i.CALL_TYPE), this._resetStatus() }, _resetStatus: function () { this._status = { signalInited: !1, signalStartTime: 0, signalEndTime: 0, sessionMode: "", calling: !1, isCaller: !1, pushConfig: {}, onTheCall: !1, isTeamCall: !1 } }, _updateStatus: function (e) { Object.assign(this._status, e) }, _getChannelInfo: function (e) { var t = this, n = e; return this._status.signalInited ? (this.logger.error("已经在房间中了"), Promise.reject("已经在房间中了")) : (a.default.verifyOptions(n, "channelName"), new Promise(function (n, o) { t._imController.joinChannel("joinChannel", { channelName: e.channelName }).then(function (e) { n(e) }).catch(function (e) { o(e) }) })) }, _resetWhenHangup: function () { this._updateStatus({ signalInited: !1, signalStartTime: 0, signalEndTime: 0, sessionMode: "", calling: !1, pushConfig: {}, onTheCall: !1 }), this._wsController && this._wsController._destroy(), this._imController._nim.protocol.setCurrentNetcall() } }; t.default = c, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); t.Config = { heartbeatInterval: 5e3, sendCommandOverTime: 1e4 } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); t.default = { connectSocketSuccess: { code: "200", desc: "wx: connectSocket: success" } }, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); t.default = { connectSocketFail: { code: "401", desc: "wx: connectSocket: fail" } }, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.genPacket = function (e, t, n) { var r = o[e]; if (r) { var i = { cmd: r.cmd, body: {}, seq: n }, a = Object.assign({}, i), s = r.body; return s.forEach(function (e) { (t[e.key] || 0 === t[e.key]) && (a.body[e.key] = t[e.key]) }), JSON.stringify(a) } }, t.parsePacket = function (e) { var t = JSON.parse(e); return t.cmd = r[t.cmd].cmd, t }; var o = { login: { cmd: 0, body: [{ key: "accid", type: "String" }, { key: "uid", type: "Number" }, { key: "cid", type: "String" }, { key: "accid", type: "Number" }, { key: "token", type: "String" }, { key: "mode", type: "Number" }, { key: "scene", type: "Number" }, { key: "usertype", type: "Number" }, { key: "liveEnable", type: "Number" }, { key: "webrtc", type: "Number" }, { key: "recordAudio", type: "Number" }, { key: "recordVideo", type: "Number" }, { key: "rtmpRecord", type: "Number" }, { key: "rtmpUrl", type: "String" }, { key: "splitMode", type: "Number" }, { key: "layout", type: "Boolean" }, { key: "recordType", type: "String" }, { key: "role", type: "Number" }] }, heartbeat: { cmd: 2, body: [{ key: "uid", type: "Number" }, { key: "cid", type: "String" }, { key: "statistic", type: "Object" }] }, logout: { cmd: 4, body: [{ key: "uid", type: "Number" }, { key: "cid", type: "String" }, { key: "statistic", type: "Object" }] }, getUploadUserList: { cmd: 5, body: [{ key: "uid", type: "Number" }, { key: "cid", type: "Number" }] }, updatePushMode: { cmd: 7, body: [{ key: "uid", type: "Number" }, { key: "cid", type: "Number" }, { key: "mode", type: "Number" }] } }, r = { 1: { cmd: "onLogin", body: [{ key: "code" }, { key: "errmsg" }, { key: "userlist" }] }, 3: { cmd: "onHeartbeat", body: [{ key: "code" }, { key: "errmsg" }, { key: "userlist" }] }, 6: { cmd: "onUploadUserList", body: [{ key: "code" }, { key: "errmsg" }, { key: "userlist" }] }, 8: { cmd: "onUpdatePushMode", body: [{ key: "code" }, { key: "errmsg" }] }, 9: { cmd: "onLogout", body: [{ key: "code" }] }, 20: { cmd: "onClientJoin", body: [{ key: "uid" }, { key: "accid" }, { key: "cid" }, { key: "url" }, { key: "mode" }] }, 21: { cmd: "onClientLeave", body: [{ key: "uid" }, { key: "accid" }, { key: "cid" }] }, 22: { cmd: "onClientUpdate", body: [{ key: "uid" }, { key: "accid" }, { key: "cid" }, { key: "mode" }] }, 23: { cmd: "onLiveRoomClose", body: [{ key: "cid" }, { key: "reason" }] }, 24: { cmd: "onKicked", body: [{ key: "cid" }, { key: "reason" }] } } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.messageMixin = function (e) { var t = e.prototype; t.onClientLeave = function (e) { this.emit("clientLeave", e.body) }, t.onClientJoin = function (e) { this.emit("clientJoin", e.body) }, t.onClientUpdate = function (e) { this.emit("clientUpdate", e) }, t.onUpdatePushMode = function (e) { this.emit("updatePushMode", e) }, t.onLiveRoomClose = function (e) { this.emit("liveRoomClose", e) }, t.onKicked = function (e) { this.emit("kicked", e) } } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.apiMixin = function (e) { e.prototype } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.lifecycleMixin = function (e) { var t = e.prototype; t._init = function () { var e = this; if (!this._wsLink) return this.login(); this._destroy().then(function () { return e.login() }) }, t._reset = function () { if (this.$options = {}, this.cmdTasksMap = {}, this.logger = null, this.uid = "", this.cid = "", this.accid = "", this.token = "", this.address = [], this.liveEnable = 0, this.webrtc = 1, this.mode = 0, this.scene = 1, this.usertype = 3, this.rtmpRecord = "", this.rtmpUrl = "", this.splitMode = "", this.layout = "", this._wsLink = null, this.seq = 1, this.heartbeatTimer && clearInterval(this.heartbeatTimer), this.heartbeatTimer = null, this.sendCommandTimerMap && 0 !== Object.keys(this.sendCommandTimerMap).length) for (var e in this.sendCommandTimerMap) clearTimeout(this.sendCommandTimerMap[e]); this.sendCommandTimerMap = {} }, t._destroy = function () { return this.logout() } } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var o = _(n(23)), r = _(n(22)), i = _(n(172)), a = _(n(171)), s = _(n(170)), c = _(n(169)), u = n(271), l = n(270), f = n(269), d = n(268), p = n(261), h = n(265); function _(e) { return e && e.__esModule ? e : { default: e } } var y = function (e) { function t(e) { (0, o.default)(this, t); var n = (0, i.default)(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return n._reset(), n.$options = e, n._adapterRef = e.adapterRef, n.logger = e.logger, n.uid = e.uid, n.cid = e.cid, n.accid = e.accid, n.token = e.token, n.address = e.address, n.webrtc = e.webrtc || 1, n.mode = e.mode || 0, n.scene = e.scene || 0, n.usertype = e.usertype || 3, n.liveEnable = e.liveEnable || 0, n.rtmpRecord = e.rtmpRecord || 0, (e.recordAudio || 0 === e.recordAudio) && (n.recordAudio = e.recordAudio), (e.recordVideo || 0 === e.recordVideo) && (n.recordVideo = e.recordVideo), (e.recordType || 0 === e.recordType) && (n.recordType = e.recordType), (e.role || 0 === e.role) && (n.role = e.role), n } return (0, a.default)(t, e), (0, r.default)(t, [{ key: "startLogin", value: function () { return this._init() } }, { key: "login", value: function () { var e = this, t = this; return new Promise(function (n, o) { t._wsLink = wx.connectSocket({ url: e.address, fail: function (e) { t.logger.log(p.CONSTANT_ERROR.connectSocketFail.desc), o(p.CONSTANT_ERROR.connectSocketFail) }, success: function (e) { n() } }), t._bindWXSocketEvent() }) } }, { key: "logout", value: function () { var e = this; return new Promise(function (t, n) { var o = { uid: e.uid, cid: e.cid, statistic: {}, seq: e.seq++ }; e.sendCmd("logout", o).then(function (o) { 200 === o.code ? (e.on("close", function (e) { t(e) }), e._wsLink.close({ code: 1e3, reason: "ws:user force close websocket", success: function (t) { e.logger.log("ws:close WebSocket force closed success") }, fail: function (t) { e.logger.log("ws:close WebSocket force closed fail") } })) : n(o) }) }) } }, { key: "updatePushMode", value: function (e) { var t = this, n = this; return this.mode = e, new Promise(function (e, o) { t.sendCmd("updatePushMode", n).then(function (t) { 200 === t.code ? e() : o(t) }) }) } }, { key: "startHeartbeat", value: function () { var e = this; this.heartbeatTimer = setInterval(function () { return e.sendCmd("heartbeat", e) }, h.Config.heartbeatInterval) } }, { key: "getUploadUserList", value: function () { var e = this; return new Promise(function (t, n) { e.sendCmd("getUploadUserList", e).then(function (e) { 200 === e.code ? t(e) : n(e) }) }) } }, { key: "_judgeRoleAndSave", value: function (e) { var t = this, n = c.default.deepClone(e); return 1 === this._adapterRef.commonStatus.role && n.userlist.map(function (e) { e.uid === t.uid && (t._adapterRef.commonStatus.rtmpPushAddress = e.url, e.url = null) }), n } }, { key: "_bindWXSocketEvent", value: function () { var e = this; this._wsLink.onOpen(function (t) { e.startHeartbeat(), e.logger.log("ws: onOpen "), e.emit("open", p.CONSTANT_SOCKET.connectSocketSuccess), e.sendCmd("login", e).then(function (t) { e.emit("syncDone", e._judgeRoleAndSave(t)) }).catch(function (t) { e.emit("error", { code: t.code, desc: "登录失败" }) }) }), this._wsLink.onError(function (t) { e.logger.log("ws: error " + t), e.emit("error", t) }), this._wsLink.onClose(function (t) { e.logger.log("ws: onclose " + t), e.emit("close", t), e._reset() }), this._wsLink.onMessage(function (t) { var n = t.data; if (e.logger.log("ws: onmessage" + n), (n = (0, d.parsePacket)(n)).seq) { var o = e.cmdTasksMap[n.seq]; o && (delete e.cmdTasksMap[n.seq], 200 === n.body.code ? o.resolve(n.body) : o.reject(n.body)) } else e[n.cmd] && e[n.cmd](n); 0 !== Object.keys(e.sendCommandTimerMap).length && (clearTimeout(e.sendCommandTimerMap[n.seq]), delete e.sendCommandTimerMap[n.seq]) }) } }, { key: "sendCmd", value: function (e, t) { var n = this; if ("logout" !== e) { var o = setTimeout(function () { n.emit("sendCommandOverTime", { cmd: e }) }, h.Config.sendCommandOverTime); this.sendCommandTimerMap[this.seq] = o } return new Promise(function (o, r) { n.cmdTasksMap[n.seq] = { resolve: o, reject: r }; var i = (0, d.genPacket)(e, t, n.seq++); n.logger.log("ws: sendCmd" + i), n._wsLink.send({ data: i }) }) } }]), t }(s.default); (0, u.lifecycleMixin)(y), (0, l.apiMixin)(y), (0, f.messageMixin)(y), t.default = y, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var o = i(n(262)), r = i(n(169)); function i(e) { return e && e.__esModule ? e : { default: e } } var a = { joinChannel: function (e) { if (this._status.isInTheRoom) return Promise.reject("正在房间中，请勿重复加入！"); r.default.verifyOptions(e, "token cid uid mode scene liveEnable role address"); var t = r.default.deepClone(e), n = this; return this.commonStatus.role = t.role, new Promise(function (e, o) { n._wsController.joinChannel(t).then(function (t) { n._updateStatus({ isInTheRoom: !0 }), e(t) }).catch(function (e) { o(e) }) }) }, leaveChannel: function () { return 0 == this._status.isInTheRoom ? Promise.reject("不在房间中了，请勿重复离开") : (this._updateStatus({ isInTheRoom: !1 }), this._wsController.leaveChannel()) }, switchMode: function (e) { return r.default.isNumber(e) ? this._wsController.switchMode(e) : Promise.reject("switchMode: 入参类型必须为Number") }, getUploadUserList: function () { return this._wsController._websocket.getUploadUserList() }, destroy: function () { this._resetStatus(), this._wsController && this._wsController.resetWhenClose() }, _resetStatus: function () { this._status = { isInTheRoom: !1 } }, _updateStatus: function (e) { Object.assign(this._status, e) }, _getLink: function () { return this._wsController._websocket }, _initNRTC: function (e) { this._wsController = new o.default(Object.assign(e, { adapterRef: this })), this._resetStatus() } }; t.default = a, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); t.default = { pushConfig: { 1: "enable", 2: "needBadge", 3: "needPushNick", 4: "pushContent", 5: "custom", 6: "pushPayload", 7: "sound", 9: "forceKeepCalling", 10: "webrtcEnable" }, liveOption: { 1: "liveEnable", 2: "webrtcEnable" } }, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); t.default = { pushConfig: { enable: 1, needBadge: 2, needPushNick: 3, pushContent: 4, custom: 5, pushPayload: 6, sound: 7, forceKeepCalling: 9, webrtcEnable: 10 }, liveOption: { liveEnable: 1, webrtcEnable: 2 } }, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var o = { netcall: { id: 9, initNetcall: 1, keepCalling: 3, calleeAck: 4, notifyCalleeAck: 5, hangup: 6, notifyHangup: 7, netcallControl: 8, notifyNetcallControl: 9, verifyChannelId: 10, createChannel: 13, joinChannel: 14, queryAccountUidMap: 16 } }, r = { initNetcall: { sid: 9, cid: o.netcall.initNetcall, params: [{ type: "byte", name: "type" }, { type: "StrArray", name: "accounts" }, { type: "String", name: "pushContent" }, { type: "String", name: "custom" }, { type: "Property", name: "pushConfig" }] }, keepCalling: { sid: 9, cid: o.netcall.keepCalling, params: [{ type: "byte", name: "type" }, { type: "StrArray", name: "accounts" }, { type: "long", name: "channelId" }] }, calleeAck: { sid: 9, cid: o.netcall.calleeAck, params: [{ type: "string", name: "account" }, { type: "long", name: "channelId" }, { type: "byte", name: "type" }, { type: "bool", name: "accepted" }] }, hangup: { sid: 9, cid: o.netcall.hangup, params: [{ type: "long", name: "channelId" }] }, netcallControl: { sid: 9, cid: o.netcall.netcallControl, params: [{ type: "long", name: "channelId" }, { type: "byte", name: "type" }] }, verifyChannelId: { sid: 9, cid: o.netcall.verifyChannelId, params: [{ type: "long", name: "channelId" }, { type: "String", name: "account" }] }, createChannel: { sid: 9, cid: o.netcall.createChannel, params: [{ type: "String", name: "channelName" }, { type: "String", name: "custom" }, { type: "String", name: "webrtcEnable" }] }, joinChannel: { sid: 9, cid: o.netcall.joinChannel, params: [{ type: "String", name: "channelName" }, { type: "Property", name: "liveOption" }] }, queryAccountUidMap: { sid: 9, cid: o.netcall.queryAccountUidMap, params: [{ type: "String", name: "channelName" }, { type: "LongArray", name: "uids" }] } }, i = { "9_1": { service: "netcall", cmd: "initNetcall", response: [{ type: "Number", name: "timetag" }, { type: "Number", name: "uid" }, { type: "Number", name: "channelId" }, { type: "StrArray", name: "turnServerList" }, { type: "StrArray", name: "sturnServerList" }, { type: "StrArray", name: "proxyServerList" }, { type: "StrArray", name: "keepCallingAccounts" }, { type: "StrLongMap", name: "accountUidMap" }, { type: "String", name: "clientConfig" }, { type: "String", name: "serverMap" }] }, "9_2": { service: "netcall", cmd: "beCalled", response: [{ type: "Number", name: "timetag" }, { type: "Number", name: "type" }, { type: "Number", name: "channelId" }, { type: "String", name: "account" }, { type: "Number", name: "uid" }, { type: "StrArray", name: "turnServerList" }, { type: "StrArray", name: "sturnServerList" }, { type: "StrArray", name: "proxyServerList" }, { type: "StrLongMap", name: "accountUidMap" }, { type: "String", name: "clientConfig" }, { type: "String", name: "custom" }, { type: "Property", name: "pushConfig" }, { type: "String", name: "serverMap" }] }, "9_3": { service: "netcall", cmd: "keepCalling", response: [{ type: "StrArr", name: "accounts" }] }, "9_4": { service: "netcall", cmd: "calleeAck", response: [] }, "9_5": { service: "netcall", cmd: "notifyCalleeAck", response: [{ type: "String", name: "account" }, { type: "long", name: "channelId" }, { type: "byte", name: "type" }, { type: "bool", name: "accepted" }] }, "9_6": { service: "netcall", cmd: "hangup", response: [] }, "9_7": { service: "netcall", cmd: "notifyHangup", response: [{ type: "long", name: "channelId" }, { type: "String", name: "account" }, { type: "long", name: "timetag" }] }, "9_8": { service: "netcall", cmd: "netcallControl", response: [] }, "9_9": { service: "netcall", cmd: "notifyNetcallControl", response: [{ type: "String", name: "account" }, { type: "byte", name: "type" }, { type: "long", name: "channelId" }] }, "9_10": { service: "netcall", cmd: "verifyChannelId", response: [] }, "9_11": { service: "netcall", cmd: "notifyNetcallRecord", response: [{ type: "Property", name: "msg" }] }, "9_12": { service: "netcall", cmd: "notifyCalleeAckSync", response: [{ type: "String", name: "timetag" }, { type: "long", name: "channelId" }, { type: "byte", name: "type" }, { type: "bool", name: "accepted" }, { type: "byte", name: "fromClientType" }] }, "9_13": { service: "netcall", cmd: "createChannel", response: [{ type: "long", name: "timetag" }] }, "9_14": { service: "netcall", cmd: "joinChannel", response: [{ type: "long", name: "timetag" }, { type: "long", name: "channelId" }, { type: "StrLongMap", name: "accountUidMap" }, { type: "String", name: "serverMap" }, { type: "String", name: "clientConfig" }, { type: "String", name: "custom" }] }, "9_15": { service: "netcall", cmd: "notifyJoin", response: [{ type: "Long", name: "channelId" }, { type: "StrLongMap", name: "accountUidMap" }] }, "9_16": { service: "netcall", cmd: "queryAccountUidMap", response: [] } }; t.default = { idMap: o, cmdConfig: r, packetConfig: i }, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var o = { install: function (e) { var t = e.Protocol.fn; t.processNetcall = function (e) { switch (e.cmd) { case "initNetcall": this.onInitNetcall(e); break; case "beCalled": this.onBeCalled(e); break; case "keepCalling": this.onKeepCalling(e); break; case "calleeAck": break; case "notifyCalleeAck": this.onNotifyCalleeAck(e); break; case "hangup": break; case "notifyHangup": this.onNotifyHangup(e); break; case "notifyNetcallControl": this.onNetcallControl(e); break; case "notifyCalleeAckSync": this.onNotifyCalleeAckSync(e); break; case "notifyNetcallRecord": this.onMsg(e); break; case "createChannel": break; case "joinChannel": this.joinChannel(e); break; case "notifyJoin": this.notifyJoin(e) } }, t.onInitNetcall = function (e) { if (!e.error) { var t = e.obj.type; e.obj = e.content, e.obj.type = t, e.obj.accounts = e.obj.keepCallingAccounts, this.setCurrentNetcall(e.obj.channelId), this.keepCalling(e) } }, t.setCurrentNetcall = function (e) { this.currentNetcallChannelId = e }, t.onKeepCalling = function (e) { e.error || e.content.accounts.length && this.keepCalling(e) }, t.keepCalling = function (e) { var t = this, n = e.obj, o = n.type, r = n.accounts, i = n.channelId; r && r.length && setTimeout(function () { t.currentNetcallChannelId && t.currentNetcallChannelId === i && t.api.keepCalling({ type: o, accounts: r, channelId: i }).catch(function () { }) }, 3e3) }, t.onBeCalled = function (e) { e.error || this.emitAPI({ type: "beCalled", obj: e.content }) }, t.onNotifyCalleeAck = function (e) { e.error || this.emitAPI({ type: "notifyCalleeAck", obj: e.content }) }, t.onNotifyHangup = function (e) { e.error || this.emitAPI({ type: "notifyHangup", obj: e.content }) }, t.onNetcallControl = function (e) { e.error || this.emitAPI({ type: "netcallControl", obj: e.content }) }, t.onNotifyCalleeAckSync = function (e) { e.error || this.emitAPI({ type: "notifyCalleeAckSync", obj: e.content }) }, t.notifyJoin = function (e) { e.error || this.emitAPI({ type: "notifyJoin", obj: e.content }) }, t.joinChannel = function (e) { e.obj = e.content } } }; t.default = o, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); function o(e) { return void 0 !== e } t.default = function (e) { o(e.enable) && (this.enable = e.enable ? 1 : 0), o(e.needBadge) && (this.needBadge = e.needBadge ? 1 : 0), o(e.needPushNick) && (this.needPushNick = e.needPushNick ? 1 : 0), o(e.pushContent) && (this.pushContent = "" + e.pushContent), o(e.custom) && (this.custom = "" + e.custom), o(e.pushPayload) && (this.pushPayload = "" + e.pushPayload), o(e.sound) && (this.sound = "" + e.sound), o(e.webrtcEnable) && (this.webrtcEnable = e.webrtcEnable ? 1 : 0), o(e.forceKeepCalling) && (this.forceKeepCalling = e.forceKeepCalling ? 1 : 0) }, e.exports = t.default }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var o, r = n(278), i = (o = r) && o.__esModule ? o : { default: o }; var a = { install: function (e) { var t = e.fn, n = e.util; t.initNetcall = function (e) { return n.verifyOptions(e, "type accounts", "netcall::initNetcall"), e.pushContent = "", e.custom = "", e.pushConfig || (e.pushConfig = {}), e.pushConfig.webrtcEnable = e.webrtcEnable, e.pushConfig = new i.default(e.pushConfig), this.cbAndSendCmd("initNetcall", e) }, t.keepCalling = function (e) { return n.verifyOptions(e, "type accounts channelId", "netcall::keepCalling"), this.cbAndSendCmd("keepCalling", e) }, t.calleeAck = function (e) { return n.verifyOptions(e, "account channelId type accepted", "netcall::calleeAck"), this.cbAndSendCmd("calleeAck", e) }, t.hangup = function (e) { return n.verifyOptions(e, "channelId", "netcall::hangup"), this.cbAndSendCmd("hangup", e) }, t.netcallControl = function (e) { return n.verifyOptions(e, "channelId type", "netcall::netcallControl"), this.cbAndSendCmd("netcallControl", e) }, t.createChannel = function (e) { return this.cbAndSendCmd("createChannel", e) }, t.joinChannel = function (e) { return n.verifyOptions(e, "channelName", "netcall::joinChannel"), n.verifyBooleanWithDefault(e, "liveEnable", !1, "", "netcall::joinChannel"), n.verifyBooleanWithDefault(e, "webrtcEnable", !1, "", "netcall::joinChannel"), this.cbAndSendCmd("joinChannel", { channelName: e.channelName, liveOption: { liveEnable: e.liveEnable ? 1 : 0, webrtcEnable: e.webrtcEnable ? 1 : 0 } }) }, t.queryAccountUidMap = function (e, t) { return this.cbAndSendCmd("queryAccountUidMap", { channelName: e, uids: t }) } } }; t.default = a, e.exports = t.default }, function (e, t, n) { var o = n(21); o(o.S, "Object", { create: n(51) }) }, function (e, t, n) { n(280); var o = n(11).Object; e.exports = function (e, t) { return o.create(e, t) } }, function (e, t, n) { e.exports = { default: n(281), __esModule: !0 } }, function (e, t, n) { var o = n(16), r = n(20), i = function (e, t) { if (r(e), !o(t) && null !== t) throw TypeError(t + ": can't set as prototype!") }; e.exports = { set: Object.setPrototypeOf || ("__proto__" in {} ? function (e, t, o) { try { (o = n(68)(Function.call, n(89).f(Object.prototype, "__proto__").set, 2))(e, []), t = !(e instanceof Array) } catch (e) { t = !0 } return function (e, n) { return i(e, n), t ? e.__proto__ = n : o(e, n), e } }({}, !1) : void 0), check: i } }, function (e, t, n) { var o = n(21); o(o.S, "Object", { setPrototypeOf: n(283).set }) }, function (e, t, n) { n(284), e.exports = n(11).Object.setPrototypeOf }, function (e, t, n) { e.exports = { default: n(285), __esModule: !0 } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.NetcallWeixin = void 0; var o = y(n(23)), r = y(n(22)), i = y(n(172)), a = y(n(171)), s = y(n(170)), c = y(n(173)), u = y(n(279)), l = y(n(277)), f = y(n(276)), d = y(n(275)), p = y(n(274)), h = y(n(273)), _ = y(n(264)); function y(e) { return e && e.__esModule ? e : { default: e } } t.NetcallWeixin = function (e) { function t(e) { (0, o.default)(this, t); var n = (0, i.default)(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return n.logger = new c.default({ debug: e.debug }), e.nim ? (Object.assign(t.prototype, _.default), n._initRTC({ nim: e.nim, logger: n.logger })) : (Object.assign(t.prototype, h.default), n._initNRTC({ logger: n.logger })), n.commonStatus = { startSessionTime: 0, endSessionTime: 0, role: 0, rtmpPushAddress: "" }, n } return (0, a.default)(t, e), (0, r.default)(t, null, [{ key: "getInstance", value: function (e) { return t.instance ? t.instance : t.instance = new t(e) } }, { key: "destroy", value: function () { t.instance = null } }, { key: "install", value: function (e, t) { u.default.install(e, t), l.default.install(e, t), e.parser.mixin({ configMap: f.default, serializeMap: d.default, unserializeMap: p.default }) } }]), t }(s.default) }, function (e, t, n) { "use strict"; var o = n(287); e.exports = o.NetcallWeixin }]);